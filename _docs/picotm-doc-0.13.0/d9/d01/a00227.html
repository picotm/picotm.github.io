<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>picotm: The picotm Programming Interface</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">The picotm Programming Interface</div>  </div>
</div><!--header-->
<div class="contents">

<p>This section provides information for users of picotm. It explains the concept of transactions and how to run a transaction with picotm.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:dd/dad/a00005"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dad/a00005.html">compiler.h</a></td></tr>
<tr class="memdesc:dd/dad/a00005"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains macros for dealing with compiler extensions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d4/dee/a00008"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dee/a00008.html">picotm-error-base.h</a></td></tr>
<tr class="memdesc:d4/dee/a00008"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains picotm error constants. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:df/d03/a00062"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d03/a00062.html">picotm.h</a></td></tr>
<tr class="memdesc:df/d03/a00062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main header file for picotm. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gacc4de35068696187a89ba73ff54f2c82"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gacc4de35068696187a89ba73ff54f2c82">picotm_begin</a></td></tr>
<tr class="separator:gacc4de35068696187a89ba73ff54f2c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad81c5c42525f3b8af155372f4f9b7bd9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gad81c5c42525f3b8af155372f4f9b7bd9">PICOTM_BEGIN_DECLS</a></td></tr>
<tr class="separator:gad81c5c42525f3b8af155372f4f9b7bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa2a3ff1fd64dd3038cb3e863da12f1c9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gaa2a3ff1fd64dd3038cb3e863da12f1c9">picotm_commit</a></td></tr>
<tr class="separator:gaa2a3ff1fd64dd3038cb3e863da12f1c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc10340471b96a797fbf6610341bbe01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gacc10340471b96a797fbf6610341bbe01">picotm_end</a></td></tr>
<tr class="separator:gacc10340471b96a797fbf6610341bbe01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad6f7517f151929feea3e2896fac0f363"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gad6f7517f151929feea3e2896fac0f363">PICOTM_END_DECLS</a></td></tr>
<tr class="separator:gad6f7517f151929feea3e2896fac0f363"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa4158c268def4df61a8bdd18c2f3d5f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gaa4158c268def4df61a8bdd18c2f3d5f8">PICOTM_EXPORT</a></td></tr>
<tr class="separator:gaa4158c268def4df61a8bdd18c2f3d5f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae50de486a74c2b6cb08065b8054902c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gae50de486a74c2b6cb08065b8054902c6">PICOTM_NORETURN</a></td></tr>
<tr class="separator:gae50de486a74c2b6cb08065b8054902c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8925df8a78b66febc94f920b197a1f6e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a></td></tr>
<tr class="separator:ga8925df8a78b66febc94f920b197a1f6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga449c1a4ff44201a422c2594ae1a82076"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#ga449c1a4ff44201a422c2594ae1a82076">picotm_safe</a></td></tr>
<tr class="separator:ga449c1a4ff44201a422c2594ae1a82076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae231c612c43903f66de9c1b754d9f852"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gae231c612c43903f66de9c1b754d9f852">PICOTM_STATIC_ASSERT</a>(_cond,  _errmsg)</td></tr>
<tr class="memdesc:gae231c612c43903f66de9c1b754d9f852"><td class="mdescLeft">&#160;</td><td class="mdescRight">_cond The compile-time assertion.  <a href="#gae231c612c43903f66de9c1b754d9f852">More...</a><br /></td></tr>
<tr class="separator:gae231c612c43903f66de9c1b754d9f852"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga027f150be49120d8000153e2844b4544"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#ga027f150be49120d8000153e2844b4544">picotm_error_code</a> { <a class="el" href="../../d9/d01/a00227.html#gga027f150be49120d8000153e2844b4544a986578d2340079a5d3c3a200427875e2">PICOTM_GENERAL_ERROR</a>, 
<a class="el" href="../../d9/d01/a00227.html#gga027f150be49120d8000153e2844b4544ac84324506cf33a843d157834707b38f1">PICOTM_OUT_OF_MEMORY</a>, 
<a class="el" href="../../d9/d01/a00227.html#gga027f150be49120d8000153e2844b4544a4a9c21f18ec6a02f3e1e245c819be8f3">PICOTM_INVALID_FENV</a>, 
<a class="el" href="../../d9/d01/a00227.html#gga027f150be49120d8000153e2844b4544a210695870f9efb49fcb399153790a5a8">PICOTM_OUT_OF_BOUNDS</a>
 }</td></tr>
<tr class="separator:ga027f150be49120d8000153e2844b4544"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7793e31c9b070a4be6f5747c5b43342e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#ga7793e31c9b070a4be6f5747c5b43342e">picotm_error_status</a> { <br />
&#160;&#160;<a class="el" href="../../d9/d01/a00227.html#gga7793e31c9b070a4be6f5747c5b43342ea3430dfee4dc0b98a1052ec1ff5a0ac17">PICOTM_CONFLICTING</a>, 
<a class="el" href="../../d9/d01/a00227.html#gga7793e31c9b070a4be6f5747c5b43342ea41ad210f00871b724585b4aefce02d17">PICOTM_REVOCABLE</a>, 
<a class="el" href="../../d9/d01/a00227.html#gga7793e31c9b070a4be6f5747c5b43342ea7a4ec77d7044942ef4fbcb2c8e0c1af0">PICOTM_ERROR_CODE</a>, 
<a class="el" href="../../d9/d01/a00227.html#gga7793e31c9b070a4be6f5747c5b43342ea2845cde18d3b63d65fe77fc9f847eb84">PICOTM_ERRNO</a>, 
<br />
&#160;&#160;<a class="el" href="../../d9/d01/a00227.html#gga7793e31c9b070a4be6f5747c5b43342ead02b9af0bb7debe151b4e716e87bf428">PICOTM_KERN_RETURN_T</a>, 
<a class="el" href="../../d9/d01/a00227.html#gga7793e31c9b070a4be6f5747c5b43342ea1fd3fddcb2eb1b425fc40f4971abfe7c">PICOTM_SIGINFO_T</a>
<br />
 }</td></tr>
<tr class="separator:ga7793e31c9b070a4be6f5747c5b43342e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga997121ceed6277b7ef69dbad1aa68086"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#ga997121ceed6277b7ef69dbad1aa68086">picotm_error_as_errno</a> (void)</td></tr>
<tr class="separator:ga997121ceed6277b7ef69dbad1aa68086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0403e0b93b3866fda5fe11dd852e2d9d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> enum <a class="el" href="../../d9/d01/a00227.html#ga027f150be49120d8000153e2844b4544">picotm_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#ga0403e0b93b3866fda5fe11dd852e2d9d">picotm_error_as_error_code</a> (void)</td></tr>
<tr class="separator:ga0403e0b93b3866fda5fe11dd852e2d9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6359f5ff0c953851e6e84ec6697096d2"><td class="memItemLeft" align="right" valign="top">kern_return_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#ga6359f5ff0c953851e6e84ec6697096d2">picotm_error_as_kern_return_t</a> (void)</td></tr>
<tr class="separator:ga6359f5ff0c953851e6e84ec6697096d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaadffaeb7663bf45f683cc55983ecf66f"><td class="memItemLeft" align="right" valign="top">const siginfo_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gaadffaeb7663bf45f683cc55983ecf66f">picotm_error_as_siginfo_t</a> (void)</td></tr>
<tr class="separator:gaadffaeb7663bf45f683cc55983ecf66f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed99eb253829e3b2b1571cffe3db056a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> _Bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gaed99eb253829e3b2b1571cffe3db056a">picotm_error_is_non_recoverable</a> (void)</td></tr>
<tr class="separator:gaed99eb253829e3b2b1571cffe3db056a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8bdacce12bec19231544ac739de3405"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> enum <a class="el" href="../../d9/d01/a00227.html#ga7793e31c9b070a4be6f5747c5b43342e">picotm_error_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gac8bdacce12bec19231544ac739de3405">picotm_error_status</a> ()</td></tr>
<tr class="separator:gac8bdacce12bec19231544ac739de3405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ec5abc7ec9784e159c055e7ccba50db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#ga6ec5abc7ec9784e159c055e7ccba50db">picotm_number_of_restarts</a> (void)</td></tr>
<tr class="separator:ga6ec5abc7ec9784e159c055e7ccba50db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga271edb9dbe9f7bf939184bcc6ecd41b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#ga271edb9dbe9f7bf939184bcc6ecd41b7">picotm_release</a> (void)</td></tr>
<tr class="separator:ga271edb9dbe9f7bf939184bcc6ecd41b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4caaf20fc37108f33c8c08bf8ea1d51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d01/a00227.html#gad4caaf20fc37108f33c8c08bf8ea1d51">picotm_restart</a> (void)</td></tr>
<tr class="separator:gad4caaf20fc37108f33c8c08bf8ea1d51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="lib_properties_of_a_transaction"></a>
Properties of a Transaction</h1>
<p>The transaction concept is a powerful metaphor for implementing concurrent and fault-tolerant software. A transaction system provides two services to it's users. These are</p>
<ul>
<li>concurrency control (i.e., thread-safe access to shared resources), and</li>
<li>error handling.</li>
</ul>
<h1><a class="anchor" id="lib_writing_transactions"></a>
Writing Transactions</h1>
<p>Each transactions contains at least the statements</p>
<ol type="1">
<li><a class="el" href="../../d9/d01/a00227.html#gacc4de35068696187a89ba73ff54f2c82">picotm_begin</a>,</li>
<li><a class="el" href="../../d9/d01/a00227.html#gaa2a3ff1fd64dd3038cb3e863da12f1c9">picotm_commit</a>, and</li>
<li><a class="el" href="../../d9/d01/a00227.html#gacc10340471b96a797fbf6610341bbe01">picotm_end</a></li>
</ol>
<p>in this exact order. In the source code, this looks like this</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span></div><div class="line">func()</div><div class="line">{</div><div class="line">     <span class="comment">// non-transactional code</span></div><div class="line"></div><div class="line">     <span class="keywordtype">int</span> x = 0;</div><div class="line"></div><div class="line">     <a class="code" href="../../d9/d01/a00227.html#gacc4de35068696187a89ba73ff54f2c82">picotm_begin</a></div><div class="line">         <span class="comment">// transactional code</span></div><div class="line">     <a class="code" href="../../d9/d01/a00227.html#gaa2a3ff1fd64dd3038cb3e863da12f1c9">picotm_commit</a></div><div class="line">     <a class="code" href="../../d9/d01/a00227.html#gacc10340471b96a797fbf6610341bbe01">picotm_end</a></div><div class="line"></div><div class="line">     <span class="comment">// more non-transactional code</span></div><div class="line">}</div></div><!-- fragment --><p>Transactional operations are invoked between <a class="el" href="../../d9/d01/a00227.html#gacc4de35068696187a89ba73ff54f2c82">picotm_begin</a> and <a class="el" href="../../d9/d01/a00227.html#gaa2a3ff1fd64dd3038cb3e863da12f1c9">picotm_commit</a>. This is called the transaction's <em>execution phase.</em> Operations listed in the execution phase are subject to speculative execution. This means that an operation might be executed, but it's effects are not permanent until the transaction commits.</p>
<p>The transaction performs a commit when the user invokes <a class="el" href="../../d9/d01/a00227.html#gaa2a3ff1fd64dd3038cb3e863da12f1c9">picotm_commit</a>. This is called the <em>commit phase.</em> It is completely implemented by picotm. No intervention by the user is required.</p>
<p>Upon entering the commit phase, picotm validates the consistency of all resources that the transaction uses. If validation succeeds, the transaction's effects are applied to become permanent. The program then continuous with the next operation after <a class="el" href="../../d9/d01/a00227.html#gacc10340471b96a797fbf6610341bbe01">picotm_end</a>. If validation fails, the transaction's effects are reverted and the transaction restarts from <a class="el" href="../../d9/d01/a00227.html#gacc4de35068696187a89ba73ff54f2c82">picotm_begin</a>. The roll-back is transparent to the program.</p>
<p>If an operation fails, picotm provides error handling for it's operations. Error handling consists of</p>
<ul>
<li>error detection, and</li>
<li>error recovery.</li>
</ul>
<p>Error detection is completely implemented by picotm an it's module. When picotm invokes an operation it tests for reported errors. No intervention by the user is required.</p>
<p>Error recovery is partially provided by picotm. For picotm, it is possible to recover from some errors. For example, if a write operation to a file temporarily fails, picotm can retry.</p>
<p>Some errors require special program logic to recover. For example, if the program runs out of memory, it might free up memory by invoking a garbage collector. This cannot generally be implemented by picotm, as it depends on program-specific constraints. This is called the <em>recovery phase.</em></p>
<p>Error-recovery code is located between <a class="el" href="../../d9/d01/a00227.html#gaa2a3ff1fd64dd3038cb3e863da12f1c9">picotm_commit</a> and <a class="el" href="../../d9/d01/a00227.html#gacc10340471b96a797fbf6610341bbe01">picotm_end</a>. If picotm detects an error that is cannot recover from, it rolls back the transaction's effects and jumps to the first instruction <em>after</em> <a class="el" href="../../d9/d01/a00227.html#gaa2a3ff1fd64dd3038cb3e863da12f1c9">picotm_commit</a>. The program now has the chance of performing error recovery and, if successful, restart the transaction by calling <a class="el" href="../../d9/d01/a00227.html#gad4caaf20fc37108f33c8c08bf8ea1d51">picotm_restart()</a>. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gacc4de35068696187a89ba73ff54f2c82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc4de35068696187a89ba73ff54f2c82">&#9670;&nbsp;</a></span>picotm_begin</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define picotm_begin</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts a new transaction.</p>
<p>Invoking <a class="el" href="../../d9/d01/a00227.html#gacc4de35068696187a89ba73ff54f2c82">picotm_begin</a> starts a new transaction. Any code between this macro and <a class="el" href="../../d9/d01/a00227.html#gaa2a3ff1fd64dd3038cb3e863da12f1c9">picotm_commit</a> is considered part of the transaction's execution phase. If the transaction aborts, it will restart from where the <a class="el" href="../../d9/d01/a00227.html#gacc4de35068696187a89ba73ff54f2c82">picotm_begin</a> had been invoked. </p>

</div>
</div>
<a id="gad81c5c42525f3b8af155372f4f9b7bd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad81c5c42525f3b8af155372f4f9b7bd9">&#9670;&nbsp;</a></span>PICOTM_BEGIN_DECLS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PICOTM_BEGIN_DECLS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Begin interface declarations </p>

</div>
</div>
<a id="gaa2a3ff1fd64dd3038cb3e863da12f1c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa2a3ff1fd64dd3038cb3e863da12f1c9">&#9670;&nbsp;</a></span>picotm_commit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define picotm_commit</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Commits the current transaction.</p>
<p>This macro commits the currently running transaction. Picotm will validate the consistency of all of the transaction's resources and, if successful, apply all outstanding operations. If validation fails, the transaction will be restarted from <a class="el" href="../../d9/d01/a00227.html#gacc4de35068696187a89ba73ff54f2c82">picotm_begin</a>.</p>
<dl class="section attention"><dt>Attention</dt><dd>Calling this macro is only valid <em>after</em> <a class="el" href="../../d9/d01/a00227.html#gacc4de35068696187a89ba73ff54f2c82">picotm_begin</a> and <em>before</em> <a class="el" href="../../d9/d01/a00227.html#gacc10340471b96a797fbf6610341bbe01">picotm_end</a>. </dd></dl>

</div>
</div>
<a id="gacc10340471b96a797fbf6610341bbe01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc10340471b96a797fbf6610341bbe01">&#9670;&nbsp;</a></span>picotm_end</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define picotm_end</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ends the current transaction. </p>

</div>
</div>
<a id="gad6f7517f151929feea3e2896fac0f363"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad6f7517f151929feea3e2896fac0f363">&#9670;&nbsp;</a></span>PICOTM_END_DECLS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PICOTM_END_DECLS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>End interface declarations </p>

</div>
</div>
<a id="gaa4158c268def4df61a8bdd18c2f3d5f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa4158c268def4df61a8bdd18c2f3d5f8">&#9670;&nbsp;</a></span>PICOTM_EXPORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PICOTM_EXPORT</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Export interface from binary object. </p>

</div>
</div>
<a id="gae50de486a74c2b6cb08065b8054902c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae50de486a74c2b6cb08065b8054902c6">&#9670;&nbsp;</a></span>PICOTM_NORETURN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PICOTM_NORETURN</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Exported function does not return. </p>

</div>
</div>
<a id="ga8925df8a78b66febc94f920b197a1f6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8925df8a78b66febc94f920b197a1f6e">&#9670;&nbsp;</a></span>PICOTM_NOTHROW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PICOTM_NOTHROW</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Exported function does not throw exceptions. </p>

</div>
</div>
<a id="ga449c1a4ff44201a422c2594ae1a82076"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga449c1a4ff44201a422c2594ae1a82076">&#9670;&nbsp;</a></span>picotm_safe</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define picotm_safe</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Marks a non-transactional variable in a function.</p>
<p>When restarting a transaction, picotm uses non-local goto, based on the <code>setjmp()</code> and <code>longjmp()</code> functions provided by the C Standard Library. These functions save and restore the thread's instruction and stack pointer, but don't save any variables. This can result in program errors if a variable is held in a register that changes its value between invocations of <code>setjmp()</code> and <code>longjmp()</code>. The call to <code>longjmp()</code> will not restore the variable's original value.</p>
<p>To avoid this problem, mark local, non-transactional variables with <a class="el" href="../../d9/d01/a00227.html#ga449c1a4ff44201a422c2594ae1a82076">picotm_safe</a> as shown below.</p>
<div class="fragment"><div class="line"><a class="code" href="../../d9/d01/a00227.html#ga449c1a4ff44201a422c2594ae1a82076">picotm_safe</a> <span class="keywordtype">int</span> var = 0;</div><div class="line"></div><div class="line"><a class="code" href="../../d9/d01/a00227.html#gacc4de35068696187a89ba73ff54f2c82">picotm_begin</a></div><div class="line"></div><div class="line">    [...]</div><div class="line"></div><div class="line"><a class="code" href="../../d9/d01/a00227.html#gaa2a3ff1fd64dd3038cb3e863da12f1c9">picotm_commit</a></div><div class="line"></div><div class="line"><a class="code" href="../../d9/d01/a00227.html#gacc10340471b96a797fbf6610341bbe01">picotm_end</a></div></div><!-- fragment --><p>Even with <a class="el" href="../../d9/d01/a00227.html#ga449c1a4ff44201a422c2594ae1a82076">picotm_safe</a>, you still have to privatize the variable when using it within the transaction.</p>
<p>With gcc, the command-line option '-Wclobbered' enables a warning about this problem. </p>

</div>
</div>
<a id="gae231c612c43903f66de9c1b754d9f852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae231c612c43903f66de9c1b754d9f852">&#9670;&nbsp;</a></span>PICOTM_STATIC_ASSERT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PICOTM_STATIC_ASSERT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_cond, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_errmsg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provides a portable static assertion. _errmsg An error message that is printed if the condition fails. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga027f150be49120d8000153e2844b4544"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga027f150be49120d8000153e2844b4544">&#9670;&nbsp;</a></span>picotm_error_code</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d9/d01/a00227.html#ga027f150be49120d8000153e2844b4544">picotm_error_code</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Signals detected errors to picotm.</p>
<p>If a component detects an error, it should prefer setting the system- specific error code that was returned by the failed call. This is more specific than the generic one's below. In some portable code, such as the tm module, using the generic codes might be preferable. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga027f150be49120d8000153e2844b4544a986578d2340079a5d3c3a200427875e2"></a>PICOTM_GENERAL_ERROR&#160;</td><td class="fielddoc"><p>The exact error is unknown. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga027f150be49120d8000153e2844b4544ac84324506cf33a843d157834707b38f1"></a>PICOTM_OUT_OF_MEMORY&#160;</td><td class="fielddoc"><p>Out-of-Memory error. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga027f150be49120d8000153e2844b4544a4a9c21f18ec6a02f3e1e245c819be8f3"></a>PICOTM_INVALID_FENV&#160;</td><td class="fielddoc"><p>Invalid floating-point environment. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga027f150be49120d8000153e2844b4544a210695870f9efb49fcb399153790a5a8"></a>PICOTM_OUT_OF_BOUNDS&#160;</td><td class="fielddoc"><p>Out-of-Bounds memory access. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga7793e31c9b070a4be6f5747c5b43342e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7793e31c9b070a4be6f5747c5b43342e">&#9670;&nbsp;</a></span>picotm_error_status</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d9/d01/a00227.html#ga7793e31c9b070a4be6f5747c5b43342e">picotm_error_status</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Signals error status to picotm. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga7793e31c9b070a4be6f5747c5b43342ea3430dfee4dc0b98a1052ec1ff5a0ac17"></a>PICOTM_CONFLICTING&#160;</td><td class="fielddoc"><p>Conflict among transactions detected. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga7793e31c9b070a4be6f5747c5b43342ea41ad210f00871b724585b4aefce02d17"></a>PICOTM_REVOCABLE&#160;</td><td class="fielddoc"><p>Transaction requires irrevocability to continue. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga7793e31c9b070a4be6f5747c5b43342ea7a4ec77d7044942ef4fbcb2c8e0c1af0"></a>PICOTM_ERROR_CODE&#160;</td><td class="fielddoc"><p>Error detected. Encoded as <code>enum picotm_error_code</code>. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga7793e31c9b070a4be6f5747c5b43342ea2845cde18d3b63d65fe77fc9f847eb84"></a>PICOTM_ERRNO&#160;</td><td class="fielddoc"><p>Error detected. Encoded as errno code. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga7793e31c9b070a4be6f5747c5b43342ead02b9af0bb7debe151b4e716e87bf428"></a>PICOTM_KERN_RETURN_T&#160;</td><td class="fielddoc"><p>Error detected. Encoded as <code>kern_return_t</code> value. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga7793e31c9b070a4be6f5747c5b43342ea1fd3fddcb2eb1b425fc40f4971abfe7c"></a>PICOTM_SIGINFO_T&#160;</td><td class="fielddoc"><p>Error detected. Encoded as signal's <code>siginfo_t</code> value. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga997121ceed6277b7ef69dbad1aa68086"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga997121ceed6277b7ef69dbad1aa68086">&#9670;&nbsp;</a></span>picotm_error_as_errno()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> int picotm_error_as_errno </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current picotm errno code.</p>
<dl class="section attention"><dt>Attention</dt><dd>This function is only valid during the transaction's recovery phase, and if <a class="el" href="../../d9/d01/a00227.html#gac8bdacce12bec19231544ac739de3405">picotm_error_status()</a> is <a class="el" href="../../d9/d01/a00227.html#gga7793e31c9b070a4be6f5747c5b43342ea2845cde18d3b63d65fe77fc9f847eb84">PICOTM_ERRNO</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The current picotm errno code. </dd></dl>

</div>
</div>
<a id="ga0403e0b93b3866fda5fe11dd852e2d9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0403e0b93b3866fda5fe11dd852e2d9d">&#9670;&nbsp;</a></span>picotm_error_as_error_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> enum <a class="el" href="../../d9/d01/a00227.html#ga027f150be49120d8000153e2844b4544">picotm_error_code</a> picotm_error_as_error_code </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current picotm error code.</p>
<dl class="section attention"><dt>Attention</dt><dd>This function is only valid during the transaction's recovery phase, and if <a class="el" href="../../d9/d01/a00227.html#gac8bdacce12bec19231544ac739de3405">picotm_error_status()</a> is <a class="el" href="../../d9/d01/a00227.html#gga7793e31c9b070a4be6f5747c5b43342ea7a4ec77d7044942ef4fbcb2c8e0c1af0">PICOTM_ERROR_CODE</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The current picotm error code. </dd></dl>

</div>
</div>
<a id="ga6359f5ff0c953851e6e84ec6697096d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6359f5ff0c953851e6e84ec6697096d2">&#9670;&nbsp;</a></span>picotm_error_as_kern_return_t()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">kern_return_t picotm_error_as_kern_return_t </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current picotm kern_return_t value.</p>
<dl class="section attention"><dt>Attention</dt><dd>This function is only valid during the transaction's recovery phase, and if <a class="el" href="../../d9/d01/a00227.html#gac8bdacce12bec19231544ac739de3405">picotm_error_status()</a> is <a class="el" href="../../d9/d01/a00227.html#gga7793e31c9b070a4be6f5747c5b43342ead02b9af0bb7debe151b4e716e87bf428">PICOTM_KERN_RETURN_T</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The current picotm kern_return_t value. </dd></dl>

</div>
</div>
<a id="gaadffaeb7663bf45f683cc55983ecf66f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaadffaeb7663bf45f683cc55983ecf66f">&#9670;&nbsp;</a></span>picotm_error_as_siginfo_t()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const siginfo_t* picotm_error_as_siginfo_t </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current error's siginfo_t value.</p>
<dl class="section attention"><dt>Attention</dt><dd>This function is only valid during the transaction's recovery phase, and if <a class="el" href="../../d9/d01/a00227.html#gac8bdacce12bec19231544ac739de3405">picotm_error_status()</a> is <a class="el" href="../../d9/d01/a00227.html#gga7793e31c9b070a4be6f5747c5b43342ea1fd3fddcb2eb1b425fc40f4971abfe7c">PICOTM_SIGINFO_T</a>.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The current siginfo_t value. </dd></dl>

</div>
</div>
<a id="gaed99eb253829e3b2b1571cffe3db056a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed99eb253829e3b2b1571cffe3db056a">&#9670;&nbsp;</a></span>picotm_error_is_non_recoverable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> _Bool picotm_error_is_non_recoverable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current error's recoverable status.</p>
<dl class="section attention"><dt>Attention</dt><dd>This function is only valid during the transaction's recovery phase.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The current error status. </dd></dl>

</div>
</div>
<a id="gac8bdacce12bec19231544ac739de3405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac8bdacce12bec19231544ac739de3405">&#9670;&nbsp;</a></span>picotm_error_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> enum <a class="el" href="../../d9/d01/a00227.html#ga7793e31c9b070a4be6f5747c5b43342e">picotm_error_status</a> <a class="el" href="../../d9/d01/a00227.html#ga7793e31c9b070a4be6f5747c5b43342e">picotm_error_status</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current error status.</p>
<dl class="section attention"><dt>Attention</dt><dd>This function is only valid during the transaction's recovery phase.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The current error status. </dd></dl>

</div>
</div>
<a id="ga6ec5abc7ec9784e159c055e7ccba50db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6ec5abc7ec9784e159c055e7ccba50db">&#9670;&nbsp;</a></span>picotm_number_of_restarts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> unsigned long picotm_number_of_restarts </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the number of restarts of the thread's most recent transaction. </p>

</div>
</div>
<a id="ga271edb9dbe9f7bf939184bcc6ecd41b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga271edb9dbe9f7bf939184bcc6ecd41b7">&#9670;&nbsp;</a></span>picotm_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> void picotm_release </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases all resources of picotm on the current thread. </p>

</div>
</div>
<a id="gad4caaf20fc37108f33c8c08bf8ea1d51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad4caaf20fc37108f33c8c08bf8ea1d51">&#9670;&nbsp;</a></span>picotm_restart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d01/a00227.html#ga8925df8a78b66febc94f920b197a1f6e">PICOTM_NOTHROW</a> void picotm_restart </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Restarts the current transaction. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<!--
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
-->
</body>
</html>
